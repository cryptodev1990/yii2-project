{% extends '@layouts/clean.twig' %}

{# form -> SetPasswordForm #}
{# passwordChanged -> bool #}
{# token -> string #}

{% block content %}
    {% if not passwordChanged %}
        <div class="container">
            <div class="p-centered col-xs-12 col-sm-6 col-md-5 col-4 mt-4">
                <h1 class="text-center mb-4">
                    {{ t('ui', 'label.reset-password') }}
                </h1>

                <form action="{{ path(['@set-password'], {'token': token}) }}" method="post">
                    {{ csrf() | raw }}

                    {{ this.render('/layouts/widgets/form-errors', {'form': form}) | raw }}

                    <div class="form-group {{ form.errors.password ? 'has-error' : '' }}">
                        <div class="has-icon-left">
                            <input class="form-input"
                                   type="password"
                                   placeholder="{{ form_label(form, 'password') }}"
                                   id="input-password"
                                   name="{{ form_field(form, 'password') }}"
                                   value="{{ form.password }}"
                                   autocomplete="off">
                            <i class="form-icon material-icons">lock</i>
                        </div>
                    </div>

                    <div class="form-group">
                        <button type="submit" class="form-input mt-3 btn btn-primary">
                            {{ t('ui', 'label.continue') }}
                        </button>
                    </div>

                </form>
            </div>
        </div>
    {% else %}
        {{ this.render('/layouts/widgets/page-message', {
            'icon': 'done',
            'title': t('ui', 'title.great'),
            'message': t('ui', 'label.email-password-changed')
        }) | raw }}
    {% endif %}
{% endblock %}